{% extends 'base.html.twig' %}
{% block title %}Play Adventure{% endblock %}
{% block body %}
{% if app.user != null %}
    <p class="hidden" id="title">{{title}}</p>
    <p class="hidden" id="adventure">{{adventure}}</p>
    <p class="hidden" id="paragraph">{{paragraph}}</p> 
    <div class="container-fluid">
        <div class="d-flex container position-absolute top-50 start-50 translate-middle justify-content-center">
            <div class="d-flex">
                <h1 id="gameover" class="hidden"><a class="nav-link" href="{{ path('homepage') }}">Game Over</a></h1>
            </div>
        </div>
        <div class="row" id="game">
            <div class="col-sm-12 col-md-4 mobileHidden" id="heroStats">
                <div class="table-responsive">
                    {% for adventure in pagination %}    
                        <table class="table table-striped table-light">
                            <tr>
                                <th>Gamebook</th>
                                <td>{{ adventure.gamebook }}</td>
                            </tr>
                            <tr>
                                <th>Adventure</th>
                                <td>{{ adventure.name }}</td>
                            </tr>          
                            <tr>
                                <th>Name</th>
                                <td>{{ adventure.hero }}</td>
                            </tr>
                            <tr>
                                <th>Skill</th>
                                <td>{{ adventure.hero.startingskill }} / {{ adventure.hero.skill }}</td>         
                            </tr>
                            <tr>
                                <th>Stamina</th>
                                <td>{{ adventure.hero.startingstamina }} / {{ adventure.hero.stamina }}</td>
                                <td class="hidden" id="stamina">{{adventure.hero.stamina}}</td>         
                            </tr>   
                            <tr>
                                <th>Luck</th>
                                <td>{{ adventure.hero.startingluck }} / {{ adventure.hero.luck }}</td>  
                                <td class="hidden" id="luck">{{adventure.hero.luck}}</td>       
                            </tr>  
                            <tr>
                                <th>Provisions</th>
                                <td>{{ adventure.hero.startingprovision }} / {{ adventure.hero.provision }}</td>         
                            </tr>      
                            <tr>
                                <th>Honour</th>
                                <td>{{ adventure.hero.honour }}</td>         
                            </tr>   
                            <tr>
                                <th>Treasure</th>
                                <td>{{ adventure.hero.treasure }}</td>         
                            </tr>                                                 
                        </table>
                    {% endfor %} 
                    <table class="table table-striped table-light">
                    <thead>
                        <tr>
                        <th>ID</th>
                        <th>Equipment</th>
                        <th>Quantity</th>
                        </tr>
                    </thead>
                    <tbody name="heroequipmentTable" id="heroequipmentTable">
                        {% for heroequipment in paginationEquipment %}
                        {% set id = heroequipment.id %}
                        <tr>
                            <td>{{ heroequipment.id}}</td>
                            <td>{{ heroequipment.equipment }}</td>
                            <td>{{ heroequipment.quantity }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                    </table>     
                </div>                           
            </div>
            <div class="col-sm-12 col-md-8" id="gameWindow">
                <a id="toggleStats" class="nav-link text-white text-center paleRed largeHidden">Stats</a>
                <div class="row" id="paragraphText">
                    {% for paragraph in paginationParagraph %}
                        <p>{{ paragraph.text}}</p>
                    {% endfor %}
                </div>
                <div class="row" id="paragraphAction">
                    {% for paragraphaction in paginationParagraphAction %}
                        <p>{{ paragraphaction.text}}</p>
                    {% endfor %}
                </div>
                <div class="row" id="paragraphEnemy">
                    {% for paragraphenemy in paginationEnemy %}
                        {% if paragraphenemy.battlecategory == "Group" %}
                            <div class="col" id="enemy">
                                <p>{{ paragraphenemy.image}}</p>
                                <p>{{ paragraphenemy.name}}</p>
                                <p>Skill: {{ paragraphenemy.skill}}</p>
                                <p>Stamina: {{ paragraphenemy.stamina}}</p>
                            </div>
                        {% else %}
                            <p id="enemy">{{ paragraphenemy.image}}</p>
                            <p>{{ paragraphenemy.name}}</p>
                            <p>Skill: {{ paragraphenemy.skill}}</p>
                            <p>Stamina: {{ paragraphenemy.stamina}}</p>                          
                        {% endif %}
                            <div class="col">
                                <button id="battleCreate" class="btn btn-danger col-12"><a class="nav-link text-white" href="{{ path('battle_create', {'adventure': adventure, 'paragraph': paragraphenemy.paragraph.id, 'enemy': paragraphenemy.id, 'luck': 0}) }}">Fight!</a></button>
                            </div>
                            <div class="col">
                                <button id="battleCreateLuck" class="btn btn-warning col-12"><a class="nav-link text-white" href="{{ path('battle_create', {'adventure': adventure, 'paragraph': paragraphenemy.paragraph.id, 'enemy': paragraphenemy.id, 'luck': 1}) }}">Fight with Luck!</a></button>
                            </div>                           
                    {% endfor %}
                </div>
                <div class="row" id="paragraphBattle">
                    {% for paragraphbattle in paginationBattle %}
                        <div class="card">
                            <div class="row" id="battleEnemy">
                                <p>Enemy Name: {{ paragraphbattle.enemy}}</p>
                                <p>Battle Round: {{ paragraphbattle.round}}</p>
                                <p>Player Stamina: {{ paragraphbattle.playerstamina}}</p>
                                <p>Enemy Stamina: {{ paragraphbattle.enemystamina}}</p>
                                <p class="hidden" id="enemystamina">{{ paragraphbattle.enemystamina }}</p>
                                <p>Player Skill: {{ paragraphbattle.playerskill}}</p>                            
                                <p>Enemy Skill: {{ paragraphbattle.enemyskill}}</p>
                                <div class="col">
                                    <button id="battleNext" class="btn btn-danger col-12"><a class="nav-link text-white" href="{{ path('battle_next', {'adventure': adventure, 'paragraph': paragraph, 'battle': paragraphbattle.id, 'luck': 0}) }}">Next Round</a></button>
                                </div>
                                <div class="col">                            
                                    <button id="battleNextLuck" class="btn btn-warning col-12"><a class="nav-link text-white" href="{{ path('battle_next', {'adventure': adventure, 'paragraph': paragraph, 'battle': paragraphbattle.id, 'luck': 1}) }}">Next Round with Luck</a></button>                           
                                </div>
                            </div>
                        </div>                        
                    {% endfor %}
                </div>                
                <div class="row" id="paragraphDirection">
                    {% for paragraphdirection in paginationParagraphDirection %}
                        <div class="col">
                            <button class="btn btn-success col-12"><a class="nav-link text-white" href="{{ path('adventure_next', {'adventure': adventure, 'paragraph': paragraphdirection.redirectparagraph}) }}">{{ paragraphdirection.text}}</a></button>
                        </div>
                    {% endfor %}
                </div>                                                

            </div>
        </div>
    </div>
{% endif %}
{% endblock %}
